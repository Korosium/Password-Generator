const AUTHOR_NAME="Korosium";const ASCII_NUMBER_INDEXES={start:48,end:57};const ASCII_UPPER_CASE_INDEXES={start:65,end:90};const ASCII_LOWER_CASE_INDEXES={start:97,end:122};const ASCII_SYMBOLS_INDEXES={start:33,end:126};const symbols_input=document.getElementById("symbols-input");const password_length=document.getElementById("password-length");const new_button=document.getElementById("new-button");const reset_button=document.getElementById("reset-button");const generated_password=document.getElementById("generated-password");symbols_input.oninput=()=>show_new_password();password_length.oninput=()=>show_new_password();new_button.onclick=()=>show_new_password();reset_button.onclick=()=>reset_page();generated_password.onclick=()=>navigator.clipboard.writeText(generated_password.value);const generate_char_array=(start,end)=>{let retval=[];for(let i=start;i<=end;i++){retval.push(String.fromCharCode(i));}return retval;};const generate_symbols_array=()=>{let retval=[];for(let i=ASCII_SYMBOLS_INDEXES.start;i<=ASCII_SYMBOLS_INDEXES.end;i++){if(i===ASCII_NUMBER_INDEXES.start)i=ASCII_NUMBER_INDEXES.end+1;if(i===ASCII_UPPER_CASE_INDEXES.start)i=ASCII_UPPER_CASE_INDEXES.end+1;if(i===ASCII_LOWER_CASE_INDEXES.start)i=ASCII_LOWER_CASE_INDEXES.end+1;retval.push(String.fromCharCode(i));}return retval;};const generate_password=(length,symbols='')=>{if(isNaN(length))length=32;if(length<4)length=4;else if(length>128)length=128;const numbers_arr=generate_char_array(ASCII_NUMBER_INDEXES.start,ASCII_NUMBER_INDEXES.end);const upper_arr=generate_char_array(ASCII_UPPER_CASE_INDEXES.start,ASCII_UPPER_CASE_INDEXES.end);const lower_arr=generate_char_array(ASCII_LOWER_CASE_INDEXES.start,ASCII_LOWER_CASE_INDEXES.end);const symbols_arr=symbols.length===0?[]:symbols.split('');const flags={numbers:false,uppers:false,lowers:false,symbols:symbols_arr.length===0};let arr=[];while(!flags.numbers||!flags.uppers||!flags.lowers||!flags.symbols){flags.numbers=false;flags.uppers=false;flags.lowers=false;flags.symbols=symbols_arr.length===0;arr=[];for(let i=0;i<length;i++){const r=rng(0,4-(symbols_arr.length===0));if(r%4===0){arr.push(numbers_arr[rng(0,numbers_arr.length)]);flags.numbers=true;}else if(r%4===1){arr.push(upper_arr[rng(0,upper_arr.length)]);flags.uppers=true;}else if(r%4===2){arr.push(lower_arr[rng(0,lower_arr.length)]);flags.lowers=true;}else if(r%4===3){arr.push(symbols_arr[rng(0,symbols_arr.length)]);flags.symbols=true;}}}let password='';for(i=0;i<length;i++){const n=rng(0,arr.length);password+=arr[n];arr=remove_element_from_array(arr,n);}return password;};const rng=(min,max)=>{const seed=crypto.getRandomValues(new Uint32Array(1))[0]/2**32;return Math.floor(seed*(max-min)+min);};const remove_element_from_array=(arr,i)=>{const l=arr.slice(0,i);const u=arr.slice(i+1);return l.concat(u);};const show_new_password=()=>{generated_password.value=generate_password(parseInt(password_length.value),symbols_input.value);password_length.value=generated_password.value.length;};const reset_page=()=>{password_length.value=32;symbols_input.value=generate_symbols_array().join('');show_new_password();};const init=()=>{reset_button.click();document.getElementsByTagName("footer")[0].innerHTML+=`<p>Copyright ${new Date().getFullYear()} ${AUTHOR_NAME}</p>`;};const main=()=>{init();};window.onload=main;